multiple_quiz_format = """
    ### 형식(필수)
    - 문제 유형: 단일정답형 객관식 (Multiple Choice)
    - 문제 1개는 아래 필드를 반드시 포함
      - number: 문제 번호(정수)
      - title: 문제(지문 + 질문)
      - selections: 선택지 4개(각 항목은 {content, correct})
      - explanation: 해설(문장형 텍스트)
    - selections 제약
      - 총 4개(정답 1개 + 오답 3개)
      - content에는 번호(1., 2., A), 정답 표시(정답/오답), 힌트(“정답은 …”)를 넣지 말 것
      - correct=True는 정확히 1개만 존재
    - 선택지 외형(길이/구조)은 'multiple_quiz_guidelines'의 외형 일관성 제약을 준수
"""

multiple_quiz_guidelines = """
    ### 목적(핵심)
    - **난이도**: DOK Level 3(전략적 사고) 수준의 대학 추론·분석형 문항을 만든다.
    - **평가 목표**: 단순 암기(DOK 1)가 아니라, 주어진 **전제/조건**에서 **결론**을 도출하는 논리적 추론을 평가한다.
    - **문제 구조**: [전제(상황/조건/사실)] + [질문(무엇이 타당한가/최선의 결론은?)]로 구성한다.
    - **중요**: 정답으로 가는 중간 추론 단계(Reasoning Chain)는 지문에 직접 드러내지 말고, 학습자가 스스로 추론하도록 설계한다.

    ---

    ### 정답/오답 설계(필수)
    - 내부적으로 각 문항에 대해 다음을 먼저 설계한 뒤 문장을 작성한다:
      - **정답 Chain**: 전제 → 올바른 추론(1~2단계) → 정답 결론
      - **오답 Chain 3개**(각각 유형 다르게):
        1) **부분 오류형**: 일부는 맞지만 핵심 조건/추론 단계가 틀림
        2) **오개념형**: 흔한 개념 혼동/과잉 일반화/맥락 무시
        3) **무관 사실형**: 사실일 수 있으나 전제와 인과·논리적으로 무관
    - **정답은 유일해야 하며**, 오답은 “그럴듯하지만 논리적으로 틀린 결론”이어야 한다.

    ---

    ### 선택지 외형 일관성(가장 중요, 강제)
    - 4개 선택지는 **문체/어조/구문/복잡도/길이**가 눈에 띄게 다르지 않아야 한다.
    - **길이 제약**: 4개 선택지 길이는 평균 길이 대비 **±20%** 이내.
    - **구조 제약**: 가능한 한 동일한 문장 템플릿(예: “A는 B 조건에서 C가 된다”)으로 4개를 맞춘다.
    - 정답만 전문 용어가 과도하거나 유난히 구체적/장문이 되지 않게 한다.

    ---

    ### 문항 작성 규칙
    - 질문은 모호하지 않게 “가장 타당한 결론/설명/원인/해석”처럼 판단 기준이 분명해야 한다.
    - 선택지에는 “항상/절대/무조건” 같은 극단 표현을 남발하지 말고, 전제와 정합성을 기준으로 판별되게 만든다.
    - 강의노트 직접 참조 표현(“본문/강의노트에 따르면…”)은 사용하지 않는다.

    ---

    ### 해설 작성 규칙(간결, 비교 중심)
    - 총 4문장 이내 권장(최대 5문장).
    - 1문장: 정답이 되는 핵심 연결고리(전제→추론→결론)를 요약.
    - 3문장: 각 오답이 왜 틀렸는지(오개념/조건 누락/무관 사실 등) 핵심 오류만 지적.
    - 문체는 단정형(“~이다/아니다”)을 사용한다.

    ---

    ### 최종 체크리스트
    - [ ] 정답이 유일한가?
    - [ ] 오답 3개가 서로 다른 오류 유형(부분 오류/오개념/무관 사실)을 갖는가?
    - [ ] 4개 선택지가 길이(±20%)와 구조(동일 템플릿)를 충족하는가?
    - [ ] 해설이 정답 근거 + 오답 오류를 비교해서 설명하는가?
    """
